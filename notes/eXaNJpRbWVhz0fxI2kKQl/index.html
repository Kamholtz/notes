<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="icon" href="/favicon.ico"/><title>Occupancy Sensing</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="Personal knowledge space"/><meta property="og:title" content="Occupancy Sensing"/><meta property="og:description" content="Personal knowledge space"/><meta property="og:url" content="https://kamholtz.github.io/notes/notes/eXaNJpRbWVhz0fxI2kKQl/"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2/26/2022"/><meta property="article:modified_time" content="2/28/2022"/><link rel="canonical" href="https://kamholtz.github.io/notes/notes/eXaNJpRbWVhz0fxI2kKQl/"/><meta name="next-head-count" content="14"/><link rel="preload" href="/notes/_next/static/css/3092aab0aa1f4483.css" as="style"/><link rel="stylesheet" href="/notes/_next/static/css/3092aab0aa1f4483.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/notes/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/notes/_next/static/chunks/webpack-9598d1b7297c7767.js" defer=""></script><script src="/notes/_next/static/chunks/framework-bb5c596eafb42b22.js" defer=""></script><script src="/notes/_next/static/chunks/main-0d50381774b20f5a.js" defer=""></script><script src="/notes/_next/static/chunks/pages/_app-639b01fffdc48b4b.js" defer=""></script><script src="/notes/_next/static/chunks/155-3a6c02d7e042edb7.js" defer=""></script><script src="/notes/_next/static/chunks/373-9c38fabb487d5920.js" defer=""></script><script src="/notes/_next/static/chunks/pages/notes/%5Bid%5D-b20175c77adb354a.js" defer=""></script><script src="/notes/_next/static/kBUqGaMzZHk_Y8dfP2rlV/_buildManifest.js" defer=""></script><script src="/notes/_next/static/kBUqGaMzZHk_Y8dfP2rlV/_ssgManifest.js" defer=""></script><script src="/notes/_next/static/kBUqGaMzZHk_Y8dfP2rlV/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><section class="ant-layout" style="width:100%;min-height:100%"><header class="ant-layout-header" style="position:fixed;isolation:isolate;z-index:1;width:100%;border-bottom:1px solid #d4dadf;height:64px;padding:0 24px 0 2px"><div class="ant-row ant-row-center" style="max-width:992px;justify-content:space-between;margin:0 auto"><div style="display:flex" class="ant-col ant-col-xs-20 ant-col-sm-4"></div><div class="ant-col gutter-row ant-col-xs-0 ant-col-sm-20 ant-col-md-20 ant-col-lg-19"><div class="ant-select ant-select-lg ant-select-auto-complete ant-select-single ant-select-allow-clear ant-select-show-search" style="width:100%"><div class="ant-select-selector"><span class="ant-select-selection-search"><input type="search" autoComplete="off" class="ant-select-selection-search-input" role="combobox" aria-haspopup="listbox" aria-owns="undefined_list" aria-autocomplete="list" aria-controls="undefined_list" aria-activedescendant="undefined_list_0" value=""/></span><span class="ant-select-selection-placeholder">For full text search please use the &#x27;?&#x27; prefix. e.g. ? Onboarding</span></div></div></div><div style="display:none;align-items:center;justify-content:center" class="ant-col ant-col-xs-4 ant-col-sm-4 ant-col-md-0 ant-col-lg-0"><span role="img" aria-label="menu" style="font-size:24px" tabindex="-1" class="anticon anticon-menu"><svg viewBox="64 64 896 896" focusable="false" data-icon="menu" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"></path></svg></span></div></div></header><section class="ant-layout site-layout" style="margin-top:64px"><section class="ant-layout site-layout" style="flex-direction:row"><section class="ant-layout site-layout-sidebar" style="flex:0 0 auto;width:calc(max((100% - 992px) / 2, 0px) + 200px);min-width:200px;padding-left:calc((100% - 992px) / 2)"><aside class="ant-layout-sider ant-layout-sider-dark" style="position:fixed;overflow:auto;height:calc(100vh - 64px);flex:0 0 200px;max-width:200px;min-width:200px;width:200px"><div class="ant-layout-sider-children"></div></aside></section><section class="ant-layout side-layout-main" style="max-width:1200px;display:initial"><main class="ant-layout-content main-content" role="main" style="padding:0 24px"><div class="ant-row"><div class="ant-col ant-col-24"><div class="ant-row" style="margin-left:-10px;margin-right:-10px"><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-24 ant-col-md-18"><div><h1 id="occupancy-sensing"><a aria-hidden="true" class="anchor-heading icon-link" href="#occupancy-sensing"></a>Occupancy Sensing</h1>
<h2 id="documentation"><a aria-hidden="true" class="anchor-heading icon-link" href="#documentation"></a>Documentation</h2>
<ul>
<li>
<p>ZBOSS: <a href="https://developer.nordicsemi.com/nRF_Connect_SDK/doc/zboss_api_doc/group___z_b___z_c_l___o_c_c_u_p_a_n_c_y___s_e_n_s_i_n_g.html">Developing with ZBOSS : ZCL Occupancy Sensing cluster</a></p>
</li>
<li>
<p>NXP docs for their API, seems to be useful regardless of MCU as a cross reference, especially since occupancy sensing isn't really implemented by Nordic/ZBOSS: <a href="https://www.nxp.com/docs/en/user-guide/JN-UG-3076.pdf">https://www.nxp.com/docs/en/user-guide/JN-UG-3076.pdf</a></p>
<p><img src="/notes/assets/images/2022-02-26-15-43-56.png" alt="Occupancy sensing cluster in NXP guide"></p>
<ul>
<li>
<p>Useful for checking the dependencies of clusters e.g.</p>
<p><img src="/notes/assets/images/2022-02-26-15-45-35.png"></p>
</li>
</ul>
</li>
</ul>
<h2 id="example-zigbee-traffic-for-philips-hue"><a aria-hidden="true" class="anchor-heading icon-link" href="#example-zigbee-traffic-for-philips-hue"></a>Example Zigbee Traffic for Philips Hue</h2>
<p><img src="/notes/assets/images/2022-02-26-15-19-15.png"></p>
<h2 id="zcl-specification"><a aria-hidden="true" class="anchor-heading icon-link" href="#zcl-specification"></a>ZCL Specification</h2>
<p></p><p></p><div class="portal-container">
<div class="portal-head">
<div class="portal-backlink">
<div class="portal-title">From <span class="portal-text-title">Occupancy Sensing</span></div>
<a href="/notes/notes/mN90xVXGdYAXVCAXL1odK" class="portal-arrow">Go to text <span class="right-arrow">→</span></a>
</div>
</div>
<div id="portal-parent-anchor" class="portal-parent" markdown="1">
<div class="portal-parent-fader-top"></div>
<div class="portal-parent-fader-bottom"></div><p>No client or server commands, it declares its state using <a href="/notes/notes/fuUwSxzu2VFW1VJOwhffA">Attribute Reporting</a>, unlike <a href="/notes/notes/v4tkNsgXKagmePc9HM8F7">On Off</a> which has a few commands for doing so.</p>
</div></div><p></p><p></p>
<h2 id="adding-occupancy-sensing-implementation"><a aria-hidden="true" class="anchor-heading icon-link" href="#adding-occupancy-sensing-implementation"></a>Adding Occupancy Sensing Implementation</h2>
<p></p><p></p><div class="portal-container">
<div class="portal-head">
<div class="portal-backlink">
<div class="portal-title">From <span class="portal-text-title">Adding Custom Cluster</span></div>
<a href="/notes/notes/wbSh7wzAFYbQIoMHDbXBu" class="portal-arrow">Go to text <span class="right-arrow">→</span></a>
</div>
</div>
<div id="portal-parent-anchor" class="portal-parent" markdown="1">
<div class="portal-parent-fader-top"></div>
<div class="portal-parent-fader-bottom"></div><p>Example of adding a custom cluster (a "shaker"):</p>
<ul>
<li><a href="https://devzone.nordicsemi.com/f/nordic-q-a/82371/unable-to-configure-attribute-reporting-on-custom-cluster/343367#343367">Unable to configure attribute reporting on custom cluster - Nordic Q&#x26;A - Nordic DevZone - Nordic DevZone</a></li>
</ul>
</div></div><p></p><p></p>
<h3 id="investigating-forum-post"><a aria-hidden="true" class="anchor-heading icon-link" href="#investigating-forum-post"></a>Investigating Forum Post</h3>
<p><a href="https://devzone.nordicsemi.com/f/nordic-q-a/60960/zigbee-occupancy-cluster-attribute-setting-gives-invalid-value-error">Zigbee Occupancy cluster attribute setting gives Invalid Value error - Nordic Q&#x26;A - Nordic DevZone - Nordic DevZone</a></p>
<p>Whenever a customer wants to use it, than he has to define:</p>
<ul>
<li>
<p>Sensor-specific attribute name, e.g.:</p>
<pre class="language-c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">ZB_ZCL_CLUSTER_ID_OCCUPANCY_SENSING_PIR</span> <span class="token expression">ZB_ZCL_CLUSTER_ID_OCCUPANCY_SENSING</span></span>
</code></pre>
</li>
<li>
<p>Sensor-specific attribute handlers, e.g.:</p>
<pre class="language-c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span><span class="token expression">ZB_ZCL_CLUSTER_ID_OCCUPANCY_SENSING_PIR_SERVER_ROLE_INIT pir_sensor_init</span></span>
</code></pre>
</li>
<li>
<p>The init function has to pass the write attribute hook to the stack, e.g.:</p>
<pre class="language-c"><code class="language-c"><span class="token function">zb_zcl_add_cluster_handlers</span><span class="token punctuation">(</span>ZB_ZCL_CLUSTER_ID_OCCUPANCY_SENSING_PIR<span class="token punctuation">,</span>
                              ZB_ZCL_CLUSTER_SERVER_ROLE<span class="token punctuation">,</span>
                              check_value_pir_sensor_server<span class="token punctuation">,</span>
                              write_attr_pir_sensor_server_hook<span class="token punctuation">,</span>
                              <span class="token punctuation">(</span><span class="token class-name">zb_zcl_cluster_handler_t</span><span class="token punctuation">)</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<ul>
<li>
<p>Notice that in <code>zb_zcl_occupancy_sensing.h</code> these are not defined as null</p>
<pre class="language-c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">ZB_ZCL_CLUSTER_ID_OCCUPANCY_SENSING_SERVER_ROLE_INIT</span> <span class="token expression"><span class="token punctuation">(</span><span class="token class-name">zb_zcl_cluster_init_t</span><span class="token punctuation">)</span><span class="token constant">NULL</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">ZB_ZCL_CLUSTER_ID_OCCUPANCY_SENSING_CLIENT_ROLE_INIT</span> <span class="token expression"><span class="token punctuation">(</span><span class="token class-name">zb_zcl_cluster_init_t</span><span class="token punctuation">)</span><span class="token constant">NULL</span></span></span>
</code></pre>
</li>
<li>
<p>Further to this point has the following comment <code>zb_zcl_comon.h</code> regarding the <code>ZB_ZCL_CLUSTER_ID_*_SERVER_ROLE_INIT</code> and  <code>ZB_ZCL_CLUSTER_ID_*_SERVER_CLIENT_INIT</code> <code>#defines</code></p>
</li>
</ul>
<pre class="language-c"><code class="language-c"><span class="token comment">/** @brief ZCL Cluster Init Handler. This handler is called on registering device context (@ref
    ZB_AF_REGISTER_DEVICE_CTX). Initialization of the cluster should include @ref
    zb_zcl_add_cluster_handlers call, if any of the cluster handlers are implemented.

    Cluster Init handler is bound to the cluster declaration via ZB_ZCL_CLUSTER_DESC macro. Every
    cluster should implement "&#x3C;cluster_id>_&#x3C;cluster_role>_INIT" macro, for example:
    @code
    #define ZB_ZCL_CLUSTER_ID_ON_OFF_SERVER_ROLE_INIT zb_zcl_on_off_init_server
    #define ZB_ZCL_CLUSTER_ID_ON_OFF_CLIENT_ROLE_INIT zb_zcl_on_off_init_client
    @endcode

    If cluster does not have any initialization steps and does not need any cluster handlers,
    Cluster Init handler may be NULL, for example:
    @code
    #define ZB_ZCL_CLUSTER_ID_OCCUPANCY_SENSING_SERVER_ROLE_INIT (zb_zcl_cluster_init_t)NULL
    #define ZB_ZCL_CLUSTER_ID_OCCUPANCY_SENSING_CLIENT_ROLE_INIT (zb_zcl_cluster_init_t)NULL
    @endcode
*/</span>
</code></pre>
<ul>
<li>
<p>These are called in <code>ZB_ZCL_CLUSTER_DESC</code> for declaring the simple descriptor (<code>zboss_api_af.h</code>). See <code>cluster_id##_SERVER_ROLE_INIT</code> within the macro</p>
<pre class="language-c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">ZB_ZCL_CLUSTER_DESC</span><span class="token expression"><span class="token punctuation">(</span>cluster_id<span class="token punctuation">,</span> attr_count<span class="token punctuation">,</span> attr_desc_list<span class="token punctuation">,</span> cluster_role_mask<span class="token punctuation">,</span> manuf_code<span class="token punctuation">)</span>         \c</span></span>
<span class="token punctuation">{</span>                                                                                                          \<span class="token function">c</span>
  <span class="token punctuation">(</span>cluster_id<span class="token punctuation">)</span><span class="token punctuation">,</span>                                                                                            \<span class="token function">c</span>
  <span class="token punctuation">(</span>attr_count<span class="token punctuation">)</span><span class="token punctuation">,</span>                                                                                            \<span class="token function">c</span>
  <span class="token punctuation">(</span>attr_desc_list<span class="token punctuation">)</span><span class="token punctuation">,</span>                                                                                        \<span class="token function">c</span>
  <span class="token punctuation">(</span>cluster_role_mask<span class="token punctuation">)</span><span class="token punctuation">,</span>                                                                                     \<span class="token function">c</span>
  <span class="token punctuation">(</span>manuf_code<span class="token punctuation">)</span><span class="token punctuation">,</span>                                                                                            \<span class="token function">c</span>
  <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>cluster_role_mask<span class="token punctuation">)</span> <span class="token operator">==</span> ZB_ZCL_CLUSTER_SERVER_ROLE<span class="token punctuation">)</span> <span class="token operator">?</span> cluster_id##_SERVER_ROLE_INIT <span class="token operator">:</span> \<span class="token function">c</span>
   <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>cluster_role_mask<span class="token punctuation">)</span> <span class="token operator">==</span> ZB_ZCL_CLUSTER_CLIENT_ROLE<span class="token punctuation">)</span> <span class="token operator">?</span> cluster_id##_CLIENT_ROLE_INIT <span class="token operator">:</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">)</span> \c
<span class="token punctuation">}</span>
</code></pre>
</li>
</ul>
</li>
</ul>
<h2 id="set_attr_descr_with-macro"><a aria-hidden="true" class="anchor-heading icon-link" href="#set_attr_descr_with-macro"></a>SET_ATTR_DESCR_WITH macro</h2>
<p>Use of <code>ZB_SET_ATTR_DESCR_WITH_xxx</code> <code>#define</code>s found...</p>
<ul>
<li>
<p><code>zb_zcl_common.h</code></p>
<pre class="language-c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">ZB_ZCL_SET_ATTR_DESC</span><span class="token expression"><span class="token punctuation">(</span>attr_id<span class="token punctuation">,</span> data_ptr<span class="token punctuation">)</span> ZB_SET_ATTR_DESCR_WITH_</span><span class="token punctuation">##</span><span class="token expression"><span class="token function">attr_id</span><span class="token punctuation">(</span>data_ptr<span class="token punctuation">)</span><span class="token punctuation">,</span></span></span>
</code></pre>
</li>
</ul>
<h2 id="home-assistant-recognising-previous-devices-appearing-with-different-names"><a aria-hidden="true" class="anchor-heading icon-link" href="#home-assistant-recognising-previous-devices-appearing-with-different-names"></a>Home Assistant recognising previous devices appearing with different names</h2>
<p>I would have thought this device record would have been deleted</p>
<blockquote>
<p><a href="Dimable_Light_v0.2">0x6093</a>: completed configuration
<a href="Dimable_Light_v0.2">0x6093</a>: stored in registry: ZhaDeviceEntry(name='Nordic Dimable_Light_v0.1', ieee='f4:ce:36:71:26:ac:67:47', last_seen=1645960862.7940586)</p>
</blockquote>
<h2 id="device-signature-comparison-with-philips-device"><a aria-hidden="true" class="anchor-heading icon-link" href="#device-signature-comparison-with-philips-device"></a>Device Signature Comparison with Philips Device</h2>
<p><a href="/notes/notes/6L3bHdZVlDEFMOrk4tKin">Device Signature</a></p>
<h3 id="occupancy-attribute-reporting-appears-in-home-assistant"><a aria-hidden="true" class="anchor-heading icon-link" href="#occupancy-attribute-reporting-appears-in-home-assistant"></a>Occupancy Attribute Reporting appears in Home Assistant!</h3>
<p>Have confirmed that occupancy attribute reporting works on first connection</p>
<ul>
<li>Commit: <a href="https://github.com/Kamholtz/zb-lightbulb/commit/0ce322e55144da43b0584d4284d5edf9fedc2236">Report occupancy on initialization (just like level and on off) · Kamholtz/zb-lightbulb@0ce322e</a></li>
</ul>




















<table><thead><tr><th>Test</th><th>Success Criteria</th><th>Success?</th></tr></thead><tbody><tr><td>Reboot via push button</td><td>Device reconnects</td><td><code>true</code></td></tr><tr><td>Reboot via removing power cable</td><td>Device reconnects</td><td><code>true</code></td></tr></tbody></table>
<hr>
<strong>Children</strong>
<ol>
<li><a href="/notes/notes/6L3bHdZVlDEFMOrk4tKin">Device Signature</a></li>
</ol>
<hr>
<strong>Backlinks</strong>
<ul>
<li><a href="/notes/notes/vn4QH8axQkezeOvv8cSG5">ZigBee Home Automation</a></li>
</ul></div></div><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-0 ant-col-md-6"><div><div class=""><div class="ant-anchor-wrapper dendron-toc" style="max-height:calc(100vh - 64px);z-index:1"><div class="ant-anchor"><div class="ant-anchor-ink"><span class="ant-anchor-ink-ball"></span></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#documentation" title="Documentation">Documentation</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#example-zigbee-traffic-for-philips-hue" title="Example Zigbee Traffic for Philips Hue">Example Zigbee Traffic for Philips Hue</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#zcl-specification" title="ZCL Specification">ZCL Specification</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#adding-occupancy-sensing-implementation" title="Adding Occupancy Sensing Implementation">Adding Occupancy Sensing Implementation</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#investigating-forum-post" title="Investigating Forum Post">Investigating Forum Post</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#set_attr_descr_with-macro" title="SET_ATTR_DESCR_WITH macro">SET_ATTR_DESCR_WITH macro</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#home-assistant-recognising-previous-devices-appearing-with-different-names" title="Home Assistant recognising previous devices appearing with different names">Home Assistant recognising previous devices appearing with different names</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#device-signature-comparison-with-philips-device" title="Device Signature Comparison with Philips Device">Device Signature Comparison with Philips Device</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#occupancy-attribute-reporting-appears-in-home-assistant" title="Occupancy Attribute Reporting appears in Home Assistant!">Occupancy Attribute Reporting appears in Home Assistant!</a></div></div></div></div></div></div></div></div></div></main><div class="ant-divider ant-divider-horizontal" role="separator"></div><footer class="ant-layout-footer" style="padding:0 24px 24px"></footer></section></section></section></section></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"note":{"id":"eXaNJpRbWVhz0fxI2kKQl","title":"Occupancy Sensing","desc":"","updated":1646049514000,"created":1645851822702,"custom":{},"fname":"proj.zb-home-automation.occupancy-sensing","type":"note","vault":{"fsPath":"vault"},"contentHash":"7fe26a51561cfab38a4e4158f6314d06","links":[{"type":"wiki","from":{"fname":"proj.zb-home-automation.occupancy-sensing","id":"eXaNJpRbWVhz0fxI2kKQl","vaultName":"vault"},"value":"proj.zb-home-automation.occupancy-sensing.device-signature","alias":"Device Signature","position":{"start":{"line":119,"column":1,"offset":5282},"end":{"line":119,"column":80,"offset":5361},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"proj.zb-home-automation.occupancy-sensing.device-signature"}},{"type":"ref","from":{"fname":"proj.zb-home-automation.occupancy-sensing","id":"eXaNJpRbWVhz0fxI2kKQl","vaultName":"vault"},"value":"ee.zb.zcl.measurement-and-sensing.occupancy-sensing","position":{"start":{"line":21,"column":1,"offset":789},"end":{"line":21,"column":57,"offset":845},"indent":[]},"xvault":false,"to":{"fname":"ee.zb.zcl.measurement-and-sensing.occupancy-sensing"}},{"type":"ref","from":{"fname":"proj.zb-home-automation.occupancy-sensing","id":"eXaNJpRbWVhz0fxI2kKQl","vaultName":"vault"},"value":"ee.nrf-connect-sdk.zb.adding-custom-cluster","position":{"start":{"line":25,"column":1,"offset":891},"end":{"line":25,"column":49,"offset":939},"indent":[]},"xvault":false,"to":{"fname":"ee.nrf-connect-sdk.zb.adding-custom-cluster"}},{"from":{"fname":"proj.zb-home-automation","vaultName":"vault"},"type":"backlink","position":{"start":{"line":39,"column":1,"offset":1622},"end":{"line":39,"column":46,"offset":1667},"indent":[]},"value":"proj.zb-home-automation.occupancy-sensing","alias":"proj.zb-home-automation.occupancy-sensing"}],"anchors":{"documentation":{"type":"header","text":"Documentation","value":"documentation","line":8,"column":0,"depth":2},"example-zigbee-traffic-for-philips-hue":{"type":"header","text":"Example Zigbee Traffic for Philips Hue","value":"example-zigbee-traffic-for-philips-hue","line":20,"column":0,"depth":2},"zcl-specification":{"type":"header","text":"ZCL Specification","value":"zcl-specification","line":25,"column":0,"depth":2},"adding-occupancy-sensing-implementation":{"type":"header","text":"Adding Occupancy Sensing Implementation","value":"adding-occupancy-sensing-implementation","line":29,"column":0,"depth":2},"investigating-forum-post":{"type":"header","text":"Investigating Forum Post","value":"investigating-forum-post","line":33,"column":0,"depth":3},"set_attr_descr_with-macro":{"type":"header","text":"SET_ATTR_DESCR_WITH macro","value":"set_attr_descr_with-macro","line":106,"column":0,"depth":2},"home-assistant-recognising-previous-devices-appearing-with-different-names":{"type":"header","text":"Home Assistant recognising previous devices appearing with different names","value":"home-assistant-recognising-previous-devices-appearing-with-different-names","line":116,"column":0,"depth":2},"device-signature-comparison-with-philips-device":{"type":"header","text":"Device Signature Comparison with Philips Device","value":"device-signature-comparison-with-philips-device","line":123,"column":0,"depth":2},"occupancy-attribute-reporting-appears-in-home-assistant":{"type":"header","text":"Occupancy Attribute Reporting appears in Home Assistant!","value":"occupancy-attribute-reporting-appears-in-home-assistant","line":127,"column":0,"depth":3}},"children":["6L3bHdZVlDEFMOrk4tKin"],"parent":"vn4QH8axQkezeOvv8cSG5","data":{}},"body":"\u003ch1 id=\"occupancy-sensing\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#occupancy-sensing\"\u003e\u003c/a\u003eOccupancy Sensing\u003c/h1\u003e\n\u003ch2 id=\"documentation\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#documentation\"\u003e\u003c/a\u003eDocumentation\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eZBOSS: \u003ca href=\"https://developer.nordicsemi.com/nRF_Connect_SDK/doc/zboss_api_doc/group___z_b___z_c_l___o_c_c_u_p_a_n_c_y___s_e_n_s_i_n_g.html\"\u003eDeveloping with ZBOSS : ZCL Occupancy Sensing cluster\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eNXP docs for their API, seems to be useful regardless of MCU as a cross reference, especially since occupancy sensing isn't really implemented by Nordic/ZBOSS: \u003ca href=\"https://www.nxp.com/docs/en/user-guide/JN-UG-3076.pdf\"\u003ehttps://www.nxp.com/docs/en/user-guide/JN-UG-3076.pdf\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/notes/assets/images/2022-02-26-15-43-56.png\" alt=\"Occupancy sensing cluster in NXP guide\"\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eUseful for checking the dependencies of clusters e.g.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/notes/assets/images/2022-02-26-15-45-35.png\"\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"example-zigbee-traffic-for-philips-hue\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#example-zigbee-traffic-for-philips-hue\"\u003e\u003c/a\u003eExample Zigbee Traffic for Philips Hue\u003c/h2\u003e\n\u003cp\u003e\u003cimg src=\"/notes/assets/images/2022-02-26-15-19-15.png\"\u003e\u003c/p\u003e\n\u003ch2 id=\"zcl-specification\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#zcl-specification\"\u003e\u003c/a\u003eZCL Specification\u003c/h2\u003e\n\u003cp\u003e\u003c/p\u003e\u003cp\u003e\u003c/p\u003e\u003cdiv class=\"portal-container\"\u003e\n\u003cdiv class=\"portal-head\"\u003e\n\u003cdiv class=\"portal-backlink\"\u003e\n\u003cdiv class=\"portal-title\"\u003eFrom \u003cspan class=\"portal-text-title\"\u003eOccupancy Sensing\u003c/span\u003e\u003c/div\u003e\n\u003ca href=\"/notes/notes/mN90xVXGdYAXVCAXL1odK\" class=\"portal-arrow\"\u003eGo to text \u003cspan class=\"right-arrow\"\u003e→\u003c/span\u003e\u003c/a\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv id=\"portal-parent-anchor\" class=\"portal-parent\" markdown=\"1\"\u003e\n\u003cdiv class=\"portal-parent-fader-top\"\u003e\u003c/div\u003e\n\u003cdiv class=\"portal-parent-fader-bottom\"\u003e\u003c/div\u003e\u003cp\u003eNo client or server commands, it declares its state using \u003ca href=\"/notes/notes/fuUwSxzu2VFW1VJOwhffA\"\u003eAttribute Reporting\u003c/a\u003e, unlike \u003ca href=\"/notes/notes/v4tkNsgXKagmePc9HM8F7\"\u003eOn Off\u003c/a\u003e which has a few commands for doing so.\u003c/p\u003e\n\u003c/div\u003e\u003c/div\u003e\u003cp\u003e\u003c/p\u003e\u003cp\u003e\u003c/p\u003e\n\u003ch2 id=\"adding-occupancy-sensing-implementation\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#adding-occupancy-sensing-implementation\"\u003e\u003c/a\u003eAdding Occupancy Sensing Implementation\u003c/h2\u003e\n\u003cp\u003e\u003c/p\u003e\u003cp\u003e\u003c/p\u003e\u003cdiv class=\"portal-container\"\u003e\n\u003cdiv class=\"portal-head\"\u003e\n\u003cdiv class=\"portal-backlink\"\u003e\n\u003cdiv class=\"portal-title\"\u003eFrom \u003cspan class=\"portal-text-title\"\u003eAdding Custom Cluster\u003c/span\u003e\u003c/div\u003e\n\u003ca href=\"/notes/notes/wbSh7wzAFYbQIoMHDbXBu\" class=\"portal-arrow\"\u003eGo to text \u003cspan class=\"right-arrow\"\u003e→\u003c/span\u003e\u003c/a\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv id=\"portal-parent-anchor\" class=\"portal-parent\" markdown=\"1\"\u003e\n\u003cdiv class=\"portal-parent-fader-top\"\u003e\u003c/div\u003e\n\u003cdiv class=\"portal-parent-fader-bottom\"\u003e\u003c/div\u003e\u003cp\u003eExample of adding a custom cluster (a \"shaker\"):\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://devzone.nordicsemi.com/f/nordic-q-a/82371/unable-to-configure-attribute-reporting-on-custom-cluster/343367#343367\"\u003eUnable to configure attribute reporting on custom cluster - Nordic Q\u0026#x26;A - Nordic DevZone - Nordic DevZone\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\u003c/div\u003e\u003cp\u003e\u003c/p\u003e\u003cp\u003e\u003c/p\u003e\n\u003ch3 id=\"investigating-forum-post\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#investigating-forum-post\"\u003e\u003c/a\u003eInvestigating Forum Post\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://devzone.nordicsemi.com/f/nordic-q-a/60960/zigbee-occupancy-cluster-attribute-setting-gives-invalid-value-error\"\u003eZigbee Occupancy cluster attribute setting gives Invalid Value error - Nordic Q\u0026#x26;A - Nordic DevZone - Nordic DevZone\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eWhenever a customer wants to use it, than he has to define:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eSensor-specific attribute name, e.g.:\u003c/p\u003e\n\u003cpre class=\"language-c\"\u003e\u003ccode class=\"language-c\"\u003e\u003cspan class=\"token macro property\"\u003e\u003cspan class=\"token directive-hash\"\u003e#\u003c/span\u003e\u003cspan class=\"token directive keyword\"\u003edefine\u003c/span\u003e \u003cspan class=\"token macro-name\"\u003eZB_ZCL_CLUSTER_ID_OCCUPANCY_SENSING_PIR\u003c/span\u003e \u003cspan class=\"token expression\"\u003eZB_ZCL_CLUSTER_ID_OCCUPANCY_SENSING\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eSensor-specific attribute handlers, e.g.:\u003c/p\u003e\n\u003cpre class=\"language-c\"\u003e\u003ccode class=\"language-c\"\u003e\u003cspan class=\"token macro property\"\u003e\u003cspan class=\"token directive-hash\"\u003e#\u003c/span\u003e\u003cspan class=\"token directive keyword\"\u003edefine\u003c/span\u003e\u003cspan class=\"token expression\"\u003eZB_ZCL_CLUSTER_ID_OCCUPANCY_SENSING_PIR_SERVER_ROLE_INIT pir_sensor_init\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eThe init function has to pass the write attribute hook to the stack, e.g.:\u003c/p\u003e\n\u003cpre class=\"language-c\"\u003e\u003ccode class=\"language-c\"\u003e\u003cspan class=\"token function\"\u003ezb_zcl_add_cluster_handlers\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eZB_ZCL_CLUSTER_ID_OCCUPANCY_SENSING_PIR\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n                              ZB_ZCL_CLUSTER_SERVER_ROLE\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n                              check_value_pir_sensor_server\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n                              write_attr_pir_sensor_server_hook\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n                              \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token class-name\"\u003ezb_zcl_cluster_handler_t\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token constant\"\u003eNULL\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eNotice that in \u003ccode\u003ezb_zcl_occupancy_sensing.h\u003c/code\u003e these are not defined as null\u003c/p\u003e\n\u003cpre class=\"language-c\"\u003e\u003ccode class=\"language-c\"\u003e\u003cspan class=\"token macro property\"\u003e\u003cspan class=\"token directive-hash\"\u003e#\u003c/span\u003e\u003cspan class=\"token directive keyword\"\u003edefine\u003c/span\u003e \u003cspan class=\"token macro-name\"\u003eZB_ZCL_CLUSTER_ID_OCCUPANCY_SENSING_SERVER_ROLE_INIT\u003c/span\u003e \u003cspan class=\"token expression\"\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token class-name\"\u003ezb_zcl_cluster_init_t\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token constant\"\u003eNULL\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token macro property\"\u003e\u003cspan class=\"token directive-hash\"\u003e#\u003c/span\u003e\u003cspan class=\"token directive keyword\"\u003edefine\u003c/span\u003e \u003cspan class=\"token macro-name\"\u003eZB_ZCL_CLUSTER_ID_OCCUPANCY_SENSING_CLIENT_ROLE_INIT\u003c/span\u003e \u003cspan class=\"token expression\"\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token class-name\"\u003ezb_zcl_cluster_init_t\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token constant\"\u003eNULL\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eFurther to this point has the following comment \u003ccode\u003ezb_zcl_comon.h\u003c/code\u003e regarding the \u003ccode\u003eZB_ZCL_CLUSTER_ID_*_SERVER_ROLE_INIT\u003c/code\u003e and  \u003ccode\u003eZB_ZCL_CLUSTER_ID_*_SERVER_CLIENT_INIT\u003c/code\u003e \u003ccode\u003e#defines\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre class=\"language-c\"\u003e\u003ccode class=\"language-c\"\u003e\u003cspan class=\"token comment\"\u003e/** @brief ZCL Cluster Init Handler. This handler is called on registering device context (@ref\n    ZB_AF_REGISTER_DEVICE_CTX). Initialization of the cluster should include @ref\n    zb_zcl_add_cluster_handlers call, if any of the cluster handlers are implemented.\n\n    Cluster Init handler is bound to the cluster declaration via ZB_ZCL_CLUSTER_DESC macro. Every\n    cluster should implement \"\u0026#x3C;cluster_id\u003e_\u0026#x3C;cluster_role\u003e_INIT\" macro, for example:\n    @code\n    #define ZB_ZCL_CLUSTER_ID_ON_OFF_SERVER_ROLE_INIT zb_zcl_on_off_init_server\n    #define ZB_ZCL_CLUSTER_ID_ON_OFF_CLIENT_ROLE_INIT zb_zcl_on_off_init_client\n    @endcode\n\n    If cluster does not have any initialization steps and does not need any cluster handlers,\n    Cluster Init handler may be NULL, for example:\n    @code\n    #define ZB_ZCL_CLUSTER_ID_OCCUPANCY_SENSING_SERVER_ROLE_INIT (zb_zcl_cluster_init_t)NULL\n    #define ZB_ZCL_CLUSTER_ID_OCCUPANCY_SENSING_CLIENT_ROLE_INIT (zb_zcl_cluster_init_t)NULL\n    @endcode\n*/\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eThese are called in \u003ccode\u003eZB_ZCL_CLUSTER_DESC\u003c/code\u003e for declaring the simple descriptor (\u003ccode\u003ezboss_api_af.h\u003c/code\u003e). See \u003ccode\u003ecluster_id##_SERVER_ROLE_INIT\u003c/code\u003e within the macro\u003c/p\u003e\n\u003cpre class=\"language-c\"\u003e\u003ccode class=\"language-c\"\u003e\u003cspan class=\"token macro property\"\u003e\u003cspan class=\"token directive-hash\"\u003e#\u003c/span\u003e\u003cspan class=\"token directive keyword\"\u003edefine\u003c/span\u003e \u003cspan class=\"token macro-name function\"\u003eZB_ZCL_CLUSTER_DESC\u003c/span\u003e\u003cspan class=\"token expression\"\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ecluster_id\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e attr_count\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e attr_desc_list\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e cluster_role_mask\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e manuf_code\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e         \\c\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e                                                                                                          \\\u003cspan class=\"token function\"\u003ec\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ecluster_id\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e                                                                                            \\\u003cspan class=\"token function\"\u003ec\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eattr_count\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e                                                                                            \\\u003cspan class=\"token function\"\u003ec\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eattr_desc_list\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e                                                                                        \\\u003cspan class=\"token function\"\u003ec\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ecluster_role_mask\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e                                                                                     \\\u003cspan class=\"token function\"\u003ec\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003emanuf_code\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e                                                                                            \\\u003cspan class=\"token function\"\u003ec\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ecluster_role_mask\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e ZB_ZCL_CLUSTER_SERVER_ROLE\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e?\u003c/span\u003e cluster_id##_SERVER_ROLE_INIT \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \\\u003cspan class=\"token function\"\u003ec\u003c/span\u003e\n   \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ecluster_role_mask\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e ZB_ZCL_CLUSTER_CLIENT_ROLE\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e?\u003c/span\u003e cluster_id##_CLIENT_ROLE_INIT \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token constant\"\u003eNULL\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \\c\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"set_attr_descr_with-macro\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#set_attr_descr_with-macro\"\u003e\u003c/a\u003eSET_ATTR_DESCR_WITH macro\u003c/h2\u003e\n\u003cp\u003eUse of \u003ccode\u003eZB_SET_ATTR_DESCR_WITH_xxx\u003c/code\u003e \u003ccode\u003e#define\u003c/code\u003es found...\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003ezb_zcl_common.h\u003c/code\u003e\u003c/p\u003e\n\u003cpre class=\"language-c\"\u003e\u003ccode class=\"language-c\"\u003e\u003cspan class=\"token macro property\"\u003e\u003cspan class=\"token directive-hash\"\u003e#\u003c/span\u003e\u003cspan class=\"token directive keyword\"\u003edefine\u003c/span\u003e \u003cspan class=\"token macro-name function\"\u003eZB_ZCL_SET_ATTR_DESC\u003c/span\u003e\u003cspan class=\"token expression\"\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eattr_id\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e data_ptr\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e ZB_SET_ATTR_DESCR_WITH_\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e##\u003c/span\u003e\u003cspan class=\"token expression\"\u003e\u003cspan class=\"token function\"\u003eattr_id\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003edata_ptr\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"home-assistant-recognising-previous-devices-appearing-with-different-names\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#home-assistant-recognising-previous-devices-appearing-with-different-names\"\u003e\u003c/a\u003eHome Assistant recognising previous devices appearing with different names\u003c/h2\u003e\n\u003cp\u003eI would have thought this device record would have been deleted\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ca href=\"Dimable_Light_v0.2\"\u003e0x6093\u003c/a\u003e: completed configuration\n\u003ca href=\"Dimable_Light_v0.2\"\u003e0x6093\u003c/a\u003e: stored in registry: ZhaDeviceEntry(name='Nordic Dimable_Light_v0.1', ieee='f4:ce:36:71:26:ac:67:47', last_seen=1645960862.7940586)\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch2 id=\"device-signature-comparison-with-philips-device\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#device-signature-comparison-with-philips-device\"\u003e\u003c/a\u003eDevice Signature Comparison with Philips Device\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"/notes/notes/6L3bHdZVlDEFMOrk4tKin\"\u003eDevice Signature\u003c/a\u003e\u003c/p\u003e\n\u003ch3 id=\"occupancy-attribute-reporting-appears-in-home-assistant\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#occupancy-attribute-reporting-appears-in-home-assistant\"\u003e\u003c/a\u003eOccupancy Attribute Reporting appears in Home Assistant!\u003c/h3\u003e\n\u003cp\u003eHave confirmed that occupancy attribute reporting works on first connection\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eCommit: \u003ca href=\"https://github.com/Kamholtz/zb-lightbulb/commit/0ce322e55144da43b0584d4284d5edf9fedc2236\"\u003eReport occupancy on initialization (just like level and on off) · Kamholtz/zb-lightbulb@0ce322e\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003ctable\u003e\u003cthead\u003e\u003ctr\u003e\u003cth\u003eTest\u003c/th\u003e\u003cth\u003eSuccess Criteria\u003c/th\u003e\u003cth\u003eSuccess?\u003c/th\u003e\u003c/tr\u003e\u003c/thead\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd\u003eReboot via push button\u003c/td\u003e\u003ctd\u003eDevice reconnects\u003c/td\u003e\u003ctd\u003e\u003ccode\u003etrue\u003c/code\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003eReboot via removing power cable\u003c/td\u003e\u003ctd\u003eDevice reconnects\u003c/td\u003e\u003ctd\u003e\u003ccode\u003etrue\u003c/code\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\u003chr\u003e\n\u003cstrong\u003eChildren\u003c/strong\u003e\n\u003col\u003e\n\u003cli\u003e\u003ca href=\"/notes/notes/6L3bHdZVlDEFMOrk4tKin\"\u003eDevice Signature\u003c/a\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003chr\u003e\n\u003cstrong\u003eBacklinks\u003c/strong\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/notes/vn4QH8axQkezeOvv8cSG5\"\u003eZigBee Home Automation\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e","noteIndex":{"id":"wn8PE1RhG0znK1alrGFYv","title":"Welcome","desc":"","updated":1647739693733,"created":1631901573363,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"vault"},"contentHash":"25f6a870234e6662373e3b363ac6e7ff","links":[],"anchors":{},"children":["9nbHM9DXYJiw0wOL5EHqu","49nbdlbyhuggwhb17c4ckrc","etnjoq40t5e9gp3i9i0ebg4","SEWMNyq5ejB4Uu2o5gD1F","30970790-4080-4f49-a9e6-d3ea9f8a2f5e","oGtULAvsKCL7IqVaNh9x5","kxlbgahdm89suj3rh234zd2","haa2RJrh1FmtvgDrCgMuO","sHUgvR09969GI1KByYETE","6y2lfHzDgTsk4Jrl7vL24","D6TMhnzbxXgM6H69SHyDd","9itq04txzxzb62nmstlovti","4nqbPU2WajRDXAXqSDnwo","5acd228c-faa2-4c6c-8fed-6abd55a1e819","2pquOIrwpkRIflevQW2UU","fe3d08bb-d6f0-4d4b-9a4d-3eae285c8f70","phaz4bx38xr32daxmt0npt5","b0k4g697aehphlpejqdd6hm","jriu7nrk5w8o38yu17adio4","g7ydg6006fa1pyg4364yi0q"],"parent":null,"data":{},"body":"\nThese are my public notes!\n\n\u003e This website is generated by a Dendron template. For more information, see the [template README file](https://github.com/dendronhq/template.publish.github-action/).\n\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":false,"leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2,"vaultSelectionModeOnCreate":"smart"}},"insertNote":{"initialValue":"templates"},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"randomNote":{},"copyNoteLink":{},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":"vault"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":true,"maxPreviewsCached":10,"maxNoteLength":204800,"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link","taskCompleteStatus":["done","x"]},"enableUserTags":true,"enableHashTags":true,"dendronVersion":"0.86.1","enableEditorDecorations":true,"enableHandlebarTemplates":true,"enableFullHierarchyNoteTitle":false,"enableSmartRefs":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false,"enableFrontmatterTags":true,"enableHashesForFMTags":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"assetsPrefix":"/notes","copyAssets":true,"siteHierarchies":["root"],"enableSiteLastModified":true,"siteRootDir":"docs","siteUrl":"https://kamholtz.github.io","enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"duplicateNoteBehavior":{"action":"useVault","payload":["vault"]},"writeStubs":false,"seo":{"title":"whomst'd've","description":"Personal knowledge space"},"github":{"enableEditLink":true,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enablePrettyLinks":true,"enableTaskNotes":true,"siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true},"page":"/notes/[id]","query":{"id":"eXaNJpRbWVhz0fxI2kKQl"},"buildId":"kBUqGaMzZHk_Y8dfP2rlV","assetPrefix":"/notes","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>